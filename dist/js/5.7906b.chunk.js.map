{"version":3,"sources":["webpack:///./src/components/page/index.tsx","webpack:///./src/pages/fund/sort/index.tsx","webpack:///./src/utils/common.ts","webpack:///./src/hooks/useSearch.ts","webpack:///./src/utils/request.ts"],"names":["PageHead","title","option","className","children","head","padding","footer","style","search","setSearch","page","data","setData","loading","setLoading","groups","setGroups","getGroups","result","list","pagination","setPagination","getList","parseInt","current","total","pageSize","columns","dataIndex","key","render","text","record","fund","code","length","ticketGroups","_record","index","ticketGroupsId","map","item","bordered","mode","placeholder","value","onChange","ids","id","source","other","pop","indexOf","getDifferentOne","groupId","ticketId","type","filter","width","Option","option15","grid","left","right","bottom","containLabel","tooltip","trigger","color","xAxis","boundaryGap","Date","date","yAxis","slice","height","min","Math","max","series","sort","defaultCurrent","showSizeChanger","defaultPageSize","dataSource","history","window","location","params","pathname","serialized","path","push","instance","a","create","baseURL","timeout","interceptors","response","use","statusCode","rst","Promise","reject","get","url","config","post"],"mappings":"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","file":"js/5.7906b.chunk.js","sourcesContent":["import React, { FC, memo, ReactNode, PropsWithChildren } from 'react'\nimport './index.scss'\n\nexport const PageHead: FC<{\n  title?: string\n  option?: () => ReactNode | ReactNode\n}> = ({ title = 'Title', option }) => {\n  return (\n    <header className='pro-page_container_header'>\n      <div>{title}</div>\n      <div>{typeof option === 'function' ? option() : option}</div>\n    </header>\n  )\n}\n\nconst Index: FC<PropsWithChildren<{\n  head?: () => ReactNode | ReactNode\n  footer?: () => ReactNode | ReactNode\n  title?: string\n  padding?: number\n  option?: () => ReactNode | ReactNode\n}>> = ({ children, head, title, option, padding = 20, footer }) => {\n  return (\n    <section className='pro-page_container'>\n      {head ? (\n        typeof head === 'function' ? (\n          head()\n        ) : (\n          head\n        )\n      ) : title ? (\n        <PageHead title={title} option={option} />\n      ) : (\n        ''\n      )}\n      <div className='pro-page_content' style={{ padding: `${padding}px` }}>\n        {children}\n      </div>\n      <div>\n        {footer ? (typeof footer === 'function' ? footer() : footer) : ''}\n      </div>\n    </section>\n  )\n}\nexport default memo(Index)\n","import React, {\n  FC,\n  memo,\n  useCallback,\n  useEffect,\n  useState,\n  Fragment,\n} from 'react'\nimport Page from '@/components/page'\nimport ReactECharts from 'echarts-for-react'\nimport useSearch from '@/hooks/useSearch'\nimport { get, post } from '@/utils/request'\nimport { Table, Pagination, Select } from 'antd'\n\nimport { getDifferentOne } from '@/utils/common'\nimport { ITicket, IFund, ITicketGroup } from '../type'\nimport './index.scss'\n\nconst Index: FC<any> = () => {\n  const [search, setSearch] = useSearch<{\n    page: string\n  }>()\n  const { page = '1' } = search\n  const [data, setData] = useState<ITicket[]>([])\n  const [loading, setLoading] = useState<boolean>(false)\n  const [groups, setGroups] = useState<ITicketGroup[]>([])\n  const getGroups = useCallback(async () => {\n    const result = await get<{ list: ITicketGroup[] }>('/ticket/fund/group')\n    setGroups(result.list)\n  }, [])\n  const [pagination, setPagination] = useState<{\n    current: number\n    pageSize: number\n    total: number\n  }>({\n    current: parseInt(page) - 1,\n    pageSize: 0,\n    total: 0,\n  })\n  const getList = useCallback(async () => {\n    setLoading(true)\n    const result = await get<{\n      list: ITicket[]\n      page: number\n      pageSize: number\n      pageTotal: number\n      total: number\n    }>('/ticket/fund/list', {\n      page: parseInt(page) - 1,\n    })\n    const { page: current, list, total, pageSize } = result\n    setPagination({\n      current: parseInt(current) + 1,\n      pageSize: parseInt(pageSize),\n      total: parseInt(total),\n    })\n    setData(list)\n    setLoading(false)\n  }, [search])\n  useEffect(() => {\n    getGroups()\n  }, [])\n  useEffect(() => {\n    getList()\n  }, [search])\n  const columns = [\n    {\n      title: '基金名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text: string, record: ITicket) => {\n        const fund = record.fund\n        return (\n          <Fragment>\n            <p className='cms-table_tb_100'>\n              {text}({record.code})\n            </p>\n            <p className='cms-table_tb_100'>{fund[fund.length - 1].fund}</p>\n          </Fragment>\n        )\n      },\n    },\n    {\n      title: '板块',\n      dataIndex: 'ticketGroups',\n      key: 'ticketGroups',\n      render: (\n        ticketGroups: ITicketGroup[],\n        _record: ITicket,\n        index: number\n      ) => {\n        const ticketGroupsId = ticketGroups.map((item) => item.id)\n        return (\n          <div className='cms-table_tb_250'>\n            <Select\n              bordered={false}\n              mode='multiple'\n              placeholder='Inserted are removed'\n              value={ticketGroupsId}\n              onChange={async (ids) => {\n                setLoading(true)\n                const id = getDifferentOne([...ids], [...ticketGroupsId])\n                await post('/ticket/fund/save', {\n                  groupId: id,\n                  ticketId: _record.id,\n                  type: ticketGroupsId.length < ids.length ? 1 : 0,\n                })\n                data[index].ticketGroups = groups.filter(\n                  (item) => ids.indexOf(item.id) !== -1\n                )\n                setData([...data])\n                setLoading(false)\n              }}\n              style={{ width: '100%' }}\n            >\n              {groups.map((item) => (\n                <Select.Option key={item.id} value={item.id}>\n                  {item.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </div>\n        )\n      },\n    },\n    {\n      title: '基金变化',\n      dataIndex: 'fund',\n      key: 'fund',\n      render: (fund: IFund[]) => {\n        const option15 = {\n          grid: {\n            left: '1%',\n            right: '2%',\n            bottom: '0%',\n            containLabel: true,\n          },\n          tooltip: {\n            trigger: 'axis',\n          },\n          color: ['red', '#CD3333'],\n          xAxis: {\n            type: 'category',\n            boundaryGap: false,\n            data: fund.map((item) => new Date(item.date).getDate()),\n          },\n          yAxis: {\n            type: 'value',\n          },\n        }\n        const data = fund.slice(-24).map((item) => item.fund)\n        return (\n          <div className='page_fund_sort-table'>\n            <ReactECharts\n              style={{ height: '250px', width: '45%' }}\n              option={{\n                ...option15,\n                yAxis: {\n                  type: 'value',\n                  min: Math.min(...data),\n                  max: Math.max(...data),\n                },\n                series: [\n                  {\n                    type: 'line',\n                    data,\n                  },\n                ],\n              }}\n            />\n            <ReactECharts\n              style={{ height: '250px', width: '45%' }}\n              option={{\n                ...option15,\n                series: [\n                  {\n                    type: 'line',\n                    data: fund.slice(-24).map((item) => item.sort + 1),\n                  },\n                ],\n              }}\n            />\n          </div>\n        )\n        // return <span>{fund[fund.length - 1].fund}</span>\n      },\n    },\n  ]\n\n  return (\n    <Page\n      // title={'当日基金排名'}\n      footer={() => (\n        <div className='pagination-right'>\n          <Pagination\n            defaultCurrent={1}\n            showSizeChanger={false}\n            defaultPageSize={30}\n            onChange={(page) => {\n              setSearch({\n                page,\n              })\n            }}\n            {...pagination}\n          />\n        </div>\n      )}\n    >\n      <Table\n        pagination={false}\n        columns={columns}\n        dataSource={data}\n        loading={loading}\n      />\n    </Page>\n  )\n}\nexport default memo(Index)\n","export function getDifferentOne(source: number[], other: number[]) {\n  if (source.length < other.length) [source, other] = [other, source]\n  while (source.length > 0) {\n    const item = source.pop() || 0\n    if (other.indexOf(item) === -1) {\n      return item\n      break\n    }\n  }\n}\n","import { useEffect, useState } from 'react'\nimport { parse, stringify } from 'query-string'\nimport { useHistory } from 'react-router'\n\nconst useSearch = <T = any>(): [T, (_: { [key: string]: any }) => void] => {\n  const history = useHistory()\n  const [search, setSearch] = useState<T>(() => parse(window.location.search))\n  const change = (params: { [key: string]: string }) => {\n    const { pathname, search } = window.location\n    const serialized = stringify({ ...parse(search), ...params })\n    setSearch({ ...parse(search), ...params })\n    const path = `${pathname}${!!serialized ? `?${serialized}` : ''}`\n    history.push(path)\n  }\n\n  useEffect(() => {\n    setSearch(parse(window.location.search))\n  }, [history.location.search])\n\n  return [search, change]\n}\n\nexport default useSearch\n","import axios, { AxiosRequestConfig } from 'axios'\n\nconst instance = axios.create({\n  baseURL: PRODUCTION ? 'http://127.0.0.1:3000' : '/api',\n  timeout: 10 * 60 * 1000,\n})\n\ninstance.interceptors.response.use((result) => {\n  const { data = {} } = result\n  const { statusCode, data: rst } = data\n  if (statusCode === 0) return rst\n  return Promise.reject(data)\n})\n\nexport const get = <T>(\n  url: string,\n  params?: any,\n  config?: AxiosRequestConfig\n): Promise<T & any> => instance.get(url, { ...config, params })\n\nexport const post = <T>(\n  url: string,\n  params?: any,\n  config?: AxiosRequestConfig\n): Promise<T & any> => instance.post(url, params, config)\n\nexport default instance\n"],"sourceRoot":""}